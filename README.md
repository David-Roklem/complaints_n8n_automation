# Обзор проекта
Сервис для обработки жалоб клиентов с интеграцией публичных API. Стек: FastAPI, SQLite, SQLalchemy, Docker, n8n.

Реализована функциональность создания жалоб через API. Кроме того, настроен воркфлоу в n8n, автоматизирующий
взаимодействие с Телеграм и Google Sheets. Демонстрацию работы можно увидеть на [скринкасте](https://disk.yandex.ru/i/iTA-K8W5_aldcA).

#### Дополнительные задачи
Также реализована доп. проверка на спам:

<img src="https://github.com/David-Roklem/complaints_n8n_automation/blob/main/Доп%20проверка%20на%20спам%201.png" alt="Описание изображения" width="800"/>

<img src="https://github.com/David-Roklem/complaints_n8n_automation/blob/main/Доп%20проверка%20на%20спам%202.png" alt="Описание изображения" width="800"/>

Касательно доп. проверки Геолокации по IP, не ясна задача. Чью геолокацию необходимо проверить? Необходимы уточнения...

### Начало работы
Склонируйте данный репозиторий командой:
```
https://github.com/David-Roklem/complaints_n8n_automation
```

### Зависимости
Зависимости проекта описаны в файлах pyproject.toml и requirements.txt.

### Docker
По примеру переменных окружения, указанных в файле .env.example, видоизмените их по необходимости

На компьютере должен быть установлен Docker. Чтобы запустить проект, вам необходимо (находясь в корне проекта) поднять контейнеры командой:
```
docker compose up -d
```

### Запуск
В браузере перейдите по адресу http://127.0.0.1:8001/docs, чтобы попасть в Swagger UI для взаимодействия с API.
По адресу http://127.0.0.1:5678/ находится панель управления n8n, которая требует дополнительной индивидуальной
настройки.

### Примеры curl запросов
```
curl -X POST "http://127.0.0.1:8001/complaints/" \
-H "Content-Type: application/json" \
-d '{"text": "Сервис работает ужасно!"}'
```
Ответ:
```
{"id":1,"status":"open","sentiment":"negative","category":"техническая","is_spam":false}
```

```
curl -X POST "http://127.0.0.1:8001/complaints/" \
-H "Content-Type: application/json" \
-d '{"text": "Закончился тестовый период, пришлите ссылку на оплату подписки"}'
```
Ответ:
```
{"id":3,"status":"open","sentiment":"neutral","category":"оплата","is_spam":false}
